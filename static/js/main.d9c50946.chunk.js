(this["webpackJsonpchecker-game-webapp"]=this["webpackJsonpchecker-game-webapp"]||[]).push([[0],{10:function(t,e,n){"use strict";var r,a=n(13),o=n(26),i=n(2),c=n(3),u=function(){function t(e){Object(i.a)(this,t),this.colorMap=e||j}return Object(c.a)(t,[{key:"setColorMap",value:function(t){this.colorMap=t}},{key:"addColorMap",value:function(t){Object.assign(this.colorMap,t)}},{key:"getColor",value:function(t){return this.colorMap[t]}},{key:"getDefaultColorKey",value:function(){var t=Object.keys(this.colorMap);return t.length?Number(t[0]):0}},{key:"getDefaultColor",value:function(){return this.colorMap[this.getDefaultColorKey()]||""}}]),t}();n.d(e,"d",(function(){return s})),n.d(e,"m",(function(){return l})),n.d(e,"n",(function(){return f})),n.d(e,"o",(function(){return d})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return m})),n.d(e,"g",(function(){return v})),n.d(e,"h",(function(){return y})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return b})),n.d(e,"k",(function(){return k})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return O})),n.d(e,"a",(function(){return C})),n.d(e,"l",(function(){return j})),n.d(e,"r",(function(){return x})),n.d(e,"q",(function(){return E})),n.d(e,"t",(function(){return M})),n.d(e,"s",(function(){return P})),n.d(e,"p",(function(){return I}));var s=0,l=1,f=2,d=3,h=4,m=5,v=6,y=7,p=8,b=9,k=10,g=11,O=12,C=13,j=(r={},Object(a.a)(r,C,"White"),Object(a.a)(r,s,"Black"),Object(a.a)(r,l,"Chartreuse"),Object(a.a)(r,f,"Coral"),Object(a.a)(r,d,"CornflowerBlue"),Object(a.a)(r,h,"Cyan"),Object(a.a)(r,m,"Gold"),Object(a.a)(r,v,"SlateBlue"),Object(a.a)(r,y,"LightCoral"),Object(a.a)(r,p,"LightBlue"),Object(a.a)(r,b,"DeepPink"),Object(a.a)(r,k,"Gray"),Object(a.a)(r,g,"YellowGreen"),Object(a.a)(r,O,"Plum"),r),x={leftTop:{x:0,y:0},rightBottom:{x:o.MATRIX_SIZE-1,y:o.MATRIX_SIZE-1}},E=new u,M={x:3,y:1},P=5,I="source-over"},115:function(t,e){},117:function(t,e){},118:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(92),a=n(2),o=n(3),i=n(27),c=n(14),u=n(17),s=function(){function t(e){Object(a.a)(this,t),this.slots=[],this.factions=[],this.actions=[],this.factions=e,this.reset()}return Object(o.a)(t,[{key:"reset",value:function(){return this.actions=[],this.initBoard(),this.initFactionPieces(),this}},{key:"move",value:function(t,e){if(null===this.slots[t.y][t.x].piece||null!==this.slots[e.y][e.x].piece)return!1;var n=this.get(t);return!!n.moveTo(e)&&(this.slots[t.y][t.x].piece=null,this.slots[e.y][e.x].piece=n,this.actions.push({from:t,to:e,piece:n}),!0)}},{key:"rollback",value:function(){if(!this.actions.length)return!1;var t=this.actions.pop(),e=t.from,n=t.to,r=t.piece;return r.moveTo(e),this.slots[n.y][n.x].piece=null,this.slots[e.y][e.x].piece=r,!0}},{key:"put",value:function(t){var e=t.getCoordinate(),n=e.x,r=e.y;return!(!Object(u.a)(e)||null!==this.slots[r][n].piece)&&(this.slots[r][n].piece=t,!0)}},{key:"get",value:function(t){return Object(u.a)(t)?this.slots[t.y][t.x].piece:null}},{key:"getActionList",value:function(){return Object(i.cloneDeep)(this.actions)}},{key:"getSlotMatrix",value:function(){return Object(i.cloneDeep)(this.slots)}},{key:"getAvailableJumpPosition",value:function(t){return Object(u.a)(t)?[].concat(Object(r.a)(this.searchNeighbourPosition(t)),Object(r.a)(this.bfsSearchJumpPosition(t))):[]}},{key:"initBoard",value:function(){var t=this;this.slots=[];for(var e=0;e<c.c;e++){for(var n=[],r=0;r<c.c;r++)n.push({piece:null,slotCategory:Object(u.a)({x:r,y:e})?"neutral":"unavailable"});this.slots.push(n)}c.a.forEach((function(e,n){n%=c.b/2,e.forEach((function(e){var r=e.x,a=e.y;t.slots[a][r].slotCategory=n}))}))}},{key:"initFactionPieces",value:function(){var t=this;this.factions.forEach((function(e){e.getPieces().forEach((function(e){return t.put(e)}))}))}},{key:"searchNeighbourPosition",value:function(t){var e=this,n=[],r=t.x,a=t.y;return c.d.forEach((function(t){var o={x:r+t.x,y:a+t.y};Object(u.a)(o)&&null===e.get(o)&&n.push(o)})),n}},{key:"bfsSearchJumpPosition",value:function(t){for(var e=[t],n=0;n<e.length;){var r=e[n++];this.wanderAround(r).forEach((function(t){void 0===e.find((function(e){return e.x===t.x&&e.y===t.y}))&&e.push(t)}))}return e.slice(1)}},{key:"wanderAround",value:function(t){var e=this,n=[];return c.d.forEach((function(r){var a=t.x,o=t.y,i={x:a+r.x,y:o+r.y},c={x:a+2*r.x,y:o+2*r.y};null!==e.get(i)&&Object(u.a)(c)&&null===e.get(c)&&n.push(c)})),n}}]),t}()},119:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(2),a=n(3),o=n(27),i=n(17),c=function(){function t(e,n){if(Object(r.a)(this,t),this.status="neutral",this.coordinate={x:0,y:0},!Object(i.a)(e))throw new Error("out of board range");this.faction=n,this.coordinate.x=e.x,this.coordinate.y=e.y,this.updateStatus()}return Object(a.a)(t,[{key:"getFactionId",value:function(){return this.faction?this.faction.getId():null}},{key:"moveTo",value:function(t){return!!Object(i.a)(t)&&(this.coordinate.x=t.x,this.coordinate.y=t.y,this.updateStatus(),!0)}},{key:"getStatus",value:function(){return this.status}},{key:"getCoordinate",value:function(){return Object(o.cloneDeep)(this.coordinate)}},{key:"updateStatus",value:function(){"undefined"===typeof this.faction?this.status="neutral":this.faction.isGoalCoordinate(this.coordinate)?this.status="goal":this.faction.isStartCoordinate(this.coordinate)?this.status="start":this.status="neutral"}}]),t}()},120:function(t,e){},121:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(2),a=n(3),o=n(27),i=n(35),c=n(14),u=n(17),s=function(){function t(e){Object(r.a)(this,t),this.pieces=[],this.id=e%6,this.reset()}return Object(a.a)(t,[{key:"reset",value:function(){return this.pieces=[],this}},{key:"initPieces",value:function(t){var e=this;return this.reset(),(Object(o.isEmpty)(t)?this.getStartCoordinates():t).forEach((function(t){return e.addPiece(t)})),this}},{key:"addPiece",value:function(t){return this.pieces.push(new i.Piece(t,this)),this}},{key:"checkWin",value:function(){return!!this.pieces.length&&this.pieces.filter((function(t){return"goal"===t.getStatus()})).length===this.pieces.length}},{key:"getPieces",value:function(){return this.pieces}},{key:"getId",value:function(){return this.id}},{key:"getStartCoordinates",value:function(){return c.a[this.id]}},{key:"getGoalCoordinates",value:function(){return c.a[Object(u.b)(this.id)]}},{key:"isStartCoordinate",value:function(t){var e=t.x,n=t.y;return void 0!==this.getStartCoordinates().find((function(t){return t.x===e&&t.y===n}))}},{key:"isGoalCoordinate",value:function(t){var e=t.x,n=t.y;return void 0!==this.getGoalCoordinates().find((function(t){return t.x===e&&t.y===n}))}}]),t}()},122:function(t,e,n){"use strict";var r=n(123);n.o(r,"GameModel")&&n.d(e,"GameModel",(function(){return r.GameModel})),n.o(r,"MATRIX_SIZE")&&n.d(e,"MATRIX_SIZE",(function(){return r.MATRIX_SIZE})),n.o(r,"mirrorFactionId")&&n.d(e,"mirrorFactionId",(function(){return r.mirrorFactionId}));var a=n(124);n.d(e,"GameModel",(function(){return a.a}))},123:function(t,e){},124:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(2),a=n(3),o=n(27),i=n(35),c=n(62),u=function(){function t(e){Object(r.a)(this,t),this.board=new i.ChessBoard([]),this.players=[],this.currentPlayerIndex=0,this.status="preparing",this.reset(e)}return Object(a.a)(t,[{key:"reset",value:function(t){return this.players=t.map((function(t){return{status:"playing",faction:new c.Faction(t).initPieces()}})),this.board=new i.ChessBoard(this.players.map((function(t){return t.faction}))),this.status="preparing",this}},{key:"resetByFaction",value:function(t){return this.players=t.map((function(t){return{status:"playing",faction:t}})),this.board=new i.ChessBoard(this.players.map((function(t){return t.faction}))),this.status="preparing",this}},{key:"start",value:function(){var t=this;return this.players.forEach((function(e){return t.updatePlayerStatus(e)})),"preparing"===this.status&&!Object(o.isEmpty)(this.players)&&!this.allPlayersEnding()&&(this.status="running",!0)}},{key:"getStatus",value:function(){return this.status}},{key:"getCurrentPlayer",value:function(){return this.players[this.currentPlayerIndex]}},{key:"getBoard",value:function(){return this.board}},{key:"updateStatus",value:function(){return"running"!==this.status?this.status:(this.updatePlayerStatus(),this.allPlayersEnding()?(this.status="end","end"):(this.cyclePlayer(),"running"))}},{key:"rollbackByStep",value:function(t){var e=this,n=this.board.getActionList();if("running"!==this.status||Object(o.isEmpty)(n)||t<0||t>n.length)return!1;for(var r=0;r<t;r++)this.board.rollback();var a=n[n.length-t].piece.getFactionId();return this.currentPlayerIndex=this.players.findIndex((function(t){return t.faction.getId()===a})),this.players.forEach((function(t){return e.updatePlayerStatus(t)})),!0}},{key:"getPlayerByFactionId",value:function(t){return this.players.find((function(e){return e.faction.getId()===t}))}},{key:"allPlayersEnding",value:function(){return void 0===this.players.find((function(t){return"playing"===t.status}))}},{key:"cyclePlayer",value:function(){var t=this.currentPlayerIndex;do{t=(t+1)%this.players.length}while("win"===this.players[t].status);this.currentPlayerIndex=t}},{key:"updatePlayerStatus",value:function(t){"undefined"===typeof t&&(t=this.players[this.currentPlayerIndex]),t.status=t.faction.checkWin()?"win":"playing"}}]),t}()},125:function(t,e){},126:function(t,e,n){"use strict";var r=n(127);n.o(r,"CheckerView")&&n.d(e,"CheckerView",(function(){return r.CheckerView})),n.o(r,"HTMLCanvas2d")&&n.d(e,"HTMLCanvas2d",(function(){return r.HTMLCanvas2d}));n(28),n(63),n(46);var a=n(128);n.d(e,"CheckerView",(function(){return a.a}));n(64)},127:function(t,e){},128:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(2),a=n(3),o=n(31),i=n(15),c=n(6),u=n(5),s=n(26),l=n(63),f=n(64),d=function(t){var e=t.x;return t.y*s.MATRIX_SIZE+e},h=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(t,a){var o;return Object(r.a)(this,n),(o=e.call(this,t,a,[])).initSlots(),o.initEvents(),o}return Object(a.a)(n,[{key:"initSlots",value:function(){var t=this,e=this.getProps(),n=this.getChildren();e.getSlotMatrix().forEach((function(e,r){e.forEach((function(e,a){n.push(new f.a(Object.assign(Object.assign({},e),{coordinate:t.convert({x:a,y:r}),status:"normal"}),t.getCanvas()))}))}))}},{key:"initEvents",value:function(){var t=this;this.getCanvas().onClick((function(e){t.emit("click",t.reconvert(e))}))}},{key:"setFocusStatus",value:function(t,e){var n=this.getChildren()[d(t)];if(!n)return!1;var r=n.getProps();return!!n.updateProps(Object.assign(Object.assign({},r),{status:e}))&&n.render()}},{key:"updateProps",value:function(t){if(!Object(o.a)(Object(i.a)(n.prototype),"updateProps",this).call(this,t))return!1;var e=this.getChildren();return this.getProps().getSlotMatrix().forEach((function(t,n){t.forEach((function(t,r){var a=e[d({x:r,y:n})];a.updateProps(Object.assign(Object.assign(Object.assign({},a.getProps()),t),{status:"normal"}))}))})),!0}},{key:"onClick",value:function(t){this.on("click",t)}},{key:"checkUpdate",value:function(t,e){return!0}},{key:"renderView",value:function(){return!0}}]),n}(l.a)},14:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return c}));var r=17,a=6,o=[[4,4],[4,5],[4,6],[4,7],[0,12],[1,12],[2,12],[3,12],[4,12],[4,13],[4,14],[4,15],[4,16],[9,12],[10,12],[11,12],[12,12]],i=[[{x:4,y:0},{x:4,y:1},{x:5,y:1},{x:4,y:2},{x:5,y:2},{x:6,y:2},{x:4,y:3},{x:5,y:3},{x:6,y:3},{x:7,y:3}],[{x:0,y:4},{x:1,y:4},{x:2,y:4},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5},{x:2,y:6},{x:3,y:6},{x:3,y:7}],[{x:4,y:12},{x:4,y:9},{x:4,y:10},{x:4,y:11},{x:5,y:10},{x:5,y:11},{x:5,y:12},{x:6,y:11},{x:6,y:12},{x:7,y:12}],[{x:12,y:16},{x:9,y:13},{x:10,y:13},{x:11,y:13},{x:12,y:13},{x:10,y:14},{x:11,y:14},{x:12,y:14},{x:11,y:15},{x:12,y:15}],[{x:16,y:12},{x:13,y:12},{x:14,y:12},{x:15,y:12},{x:13,y:11},{x:14,y:11},{x:15,y:11},{x:13,y:10},{x:14,y:10},{x:13,y:9}],[{x:12,y:4},{x:9,y:4},{x:10,y:4},{x:11,y:4},{x:10,y:5},{x:11,y:5},{x:12,y:5},{x:11,y:6},{x:12,y:6},{x:12,y:7}]],c=[{x:-1,y:-1},{x:0,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]},141:function(t,e){},142:function(t,e,n){"use strict";var r=n(2),a=n(3),o=function(){function t(e,n){Object(r.a)(this,t),this.gameModel=e,this.calculator=n}return Object(a.a)(t,[{key:"getCalculator",value:function(){return this.calculator}},{key:"getGameModel",value:function(){return this.gameModel}},{key:"getBoard",value:function(){return this.gameModel.getBoard()}},{key:"getFactionById",value:function(t){var e=this.gameModel.getPlayerByFactionId(t);if("undefined"!==typeof e)return e.faction}}]),t}(),i=n(6),c=n(5),u=n(248),s=n(250),l=n(24),f=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(t,a){return Object(r.a)(this,n),e.call(this,t,a)}return Object(a.a)(n,[{key:"predict",value:function(t){var e=this,n=this.getFactionById(t);if(Object(u.a)(n))return null;this.getCalculator().updateBoardAndFaction(this.getBoard(),n);var r=Object(l.a)(this.getBoard(),n),a=[],o=-1e3;return r.forEach((function(t){var n=e.getCalculator().getScore(t);n>o?(o=n,a=[t]):n===o&&a.push(t)})),Object(s.a)(a)}}]),n}(o),d=n(151),h=n(31),m=n(15),v=n(247),y=n(249),p=n(26),b=function(t,e){var n={board:t.board,boardScore:e.score===1/0?1/0:t.boardScore+e.score,minOrMax:"max"===t.minOrMax?"min":"max",alpha:t.alpha,beta:t.beta,score:0,steps:[],stepToWin:1/0};return n.score="max"===n.minOrMax?-1/0:1/0,n},k=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(t,a){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Object(r.a)(this,n),(o=e.call(this,t,a)).maxDepth=i,o}return Object(a.a)(n,[{key:"predict",value:function(t){var e=this.getGameModel().getPlayerByFactionId(Object(p.mirrorFactionId)(t));return Object(v.a)(e)||"win"===e.status?Object(h.a)(Object(m.a)(n.prototype),"predict",this).call(this,t):(this.faction=this.getGameModel().getPlayerByFactionId(t).faction,this.mirrorFaction=e.faction,this.minmaxPredict())}},{key:"minmaxPredict",value:function(){var t={board:this.getBoard(),boardScore:0,minOrMax:"max",alpha:-1/0,beta:1/0,score:-1/0,steps:[],stepToWin:1/0};return this.dfsPredict(0,t),Object(s.a)(t.steps)}},{key:"dfsPredict",value:function(t,e){if(t!==this.maxDepth){var n,r=this.getCurrentFaction(t),a=Object(l.a)(e.board,r),o=Object(d.a)(a);try{for(o.s();!(n=o.n()).done;){var i=n.value;e.board.move(i.from,i.to);var c=this.createPredictionFromStep(r,i);if(Object(y.a)(c))e.board.rollback();else{var u=b(e,c);if(c.score!==1/0?this.dfsPredict(t+1,u):u.stepToWin=t,this.updateMinOrMaxScore(e,u,i),e.board.rollback(),e.alpha>e.beta)break}}}catch(s){o.e(s)}finally{o.f()}}else e.score=e.boardScore}},{key:"updateMinOrMaxScore",value:function(t,e,n){e.stepToWin===1/0?t.stepToWin===1/0&&(e.score===t.score?t.steps.push(n):"max"===t.minOrMax&&e.score>t.score?(t.steps=[n],t.alpha=t.score=e.score):"min"===t.minOrMax&&e.score<t.score&&(t.steps=[n],t.beta=t.score=e.score)):t.stepToWin>e.stepToWin&&(t.stepToWin=e.stepToWin,t.steps=[n])}},{key:"getCurrentFaction",value:function(t){return t%2===0?this.faction:this.mirrorFaction}},{key:"createPredictionFromStep",value:function(t,e){if(t===this.faction&&t.checkWin())return{step:e,score:1/0};this.getCalculator().updateBoardAndFaction(this.getBoard(),t);var n=this.getCalculator().getScore(e);return{step:e,score:t===this.faction?n:-n}}}]),n}(f),g=n(65),O=function(){function t(e,n){Object(r.a)(this,t),this.predictors=new Map,this.calculator=n||new g.a,this.model=e,this.predictors.set("simple",new f(this.model,this.calculator)),this.predictors.set("normal",new k(this.model,this.calculator,3)),this.predictors.set("hard",new k(this.model,this.calculator,5))}return Object(a.a)(t,[{key:"get",value:function(t){return this.predictors.get(t)}}]),t}();n.d(e,"a",(function(){return O}))},143:function(t,e,n){"use strict";var r=n(2),a=n(3),o=n(31),i=n(15),c=n(6),u=n(5),s=n(26),l=n(10),f=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(t,a){var o;return Object(r.a)(this,n),(o=e.call(this)).transforms=[],o.fillMode="fill",o.pallete=t,o.color=o.pallete.getDefaultColorKey(),o.scale=a,o}return Object(a.a)(n,[{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(t){return this.scale=t,this}},{key:"getFillMode",value:function(){return this.fillMode}},{key:"setFillMode",value:function(t){return this.fillMode=t,this}},{key:"getPallete",value:function(){return this.pallete}},{key:"getColor",value:function(){return this.color}},{key:"setColor",value:function(t){return""!==this.pallete.getColor(t)&&(this.color=t,!0)}},{key:"setTransforms",value:function(t){this.transforms=t}},{key:"addTransform",value:function(t){this.transforms.push(t)}},{key:"getTransforms",value:function(){return this.transforms}},{key:"transform",value:function(t){return this.getTransforms().reduce((function(t,e){return e.transform(t)}),t)}},{key:"untransform",value:function(t){return this.getTransforms().reduceRight((function(t,e){return e.untransform(t)}),t)}},{key:"onClick",value:function(t){this.on("click",t)}}]),n}(n(74).EventEmitter),d=function(){function t(e){Object(r.a)(this,t),this.factor=e||1}return Object(a.a)(t,[{key:"transform",value:function(t){return{x:t.x*this.factor,y:t.y*this.factor}}},{key:"untransform",value:function(t){return{x:t.x/this.factor,y:t.y/this.factor}}}]),t}(),h=function(){function t(e){Object(r.a)(this,t),this.radius=e||0}return Object(a.a)(t,[{key:"transform",value:function(t){return{x:t.x-t.y*Math.sin(this.radius),y:t.y*Math.cos(this.radius)}}},{key:"untransform",value:function(t){return{x:t.x+t.y*Math.tan(this.radius),y:t.y/Math.cos(this.radius)}}}]),t}(),m=function(){function t(e){Object(r.a)(this,t),this.unit=e}return Object(a.a)(t,[{key:"transform",value:function(t){return{x:t.x+this.unit.x,y:t.y+this.unit.y}}},{key:"untransform",value:function(t){return{x:t.x-this.unit.x,y:t.y-this.unit.y}}}]),t}(),v=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(t){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.q;Object(r.a)(this,n),(a=e.call(this,i,o)).onClickHandler=function(t){a.emit("click",a.untransform({x:t.offsetX,y:t.offsetY}))},a.canvas=t,a.canvas.onclick=a.onClickHandler;var c=a.canvas.getContext("2d");if(null===c)throw new Error("init canvas error!");return a.deviceContext=c,a.deviceContext.lineWidth=l.s,a.deviceContext.globalCompositeOperation=l.p,a.setColor(a.getColor()),a.setTransforms([new h(Math.PI/6),new m(l.t),new d(a.getZoomFactor())]),a}return Object(a.a)(n,[{key:"untransform",value:function(t){var e=Object(o.a)(Object(i.a)(n.prototype),"untransform",this).call(this,t);return e.x=Math.round(e.x),e.y=Math.round(e.y),e}},{key:"line",value:function(t,e){return t=this.transform(t),e=this.transform(e),this.deviceContext.moveTo(t.x,t.y),this.deviceContext.lineTo(e.x,e.y),!0}},{key:"circle",value:function(t,e){return t=this.transform(t),this.deviceContext.beginPath(),this.deviceContext.arc(t.x,t.y,e,0,2*Math.PI),"fill"==this.getFillMode()?this.deviceContext.fill():this.deviceContext.stroke(),!0}},{key:"putPixel",value:function(t){return t=this.transform(t),this.deviceContext.rect(t.x,t.y,1,1),this.deviceContext.fill(),!0}},{key:"setColor",value:function(t){return!!Object(o.a)(Object(i.a)(n.prototype),"setColor",this).call(this,t)&&(this.deviceContext.fillStyle=this.deviceContext.strokeStyle=this.getPallete().getColor(t),!0)}},{key:"getZoomFactor",value:function(){return Math.min(Number(this.canvas.getAttribute("width")),Number(this.canvas.getAttribute("height")))/s.MATRIX_SIZE}}]),n}(f);n.d(e,"a",(function(){return v}))},144:function(t,e,n){"use strict";var r=n(2),a=n(3),o=n(6),i=n(5),c=n(247),u=n(149),s=function(t){Object(o.a)(n,t);var e=Object(i.a)(n);function n(t){var a;return Object(r.a)(this,n),(a=e.call(this,t)).predictors=new u.PredictorManager(a.model),a}return Object(a.a)(n,[{key:"moveByOthers",value:function(){var t=this.model.getCurrentPlayer().faction.getId(),e=this.aiPlayers.find((function(e){return e.factionId===t})),n=Object(c.a)(e)?"simple":e.difficulty,r=this.predictors.get(n);return new Promise((function(e){return setTimeout((function(){return e(r.predict(t))}),500)}))}}]),n}(n(77).a);n.d(e,"a",(function(){return s}))},145:function(t,e,n){"use strict";var r=n(2),a=n(3),o=n(6),i=n(5),c=(n(207),n(248)),u=n(7),s=function(t){Object(o.a)(n,t);var e=Object(i.a)(n);function n(t,a){var o;return Object(r.a)(this,n),(o=e.call(this,t)).moveByOthersPromise=null,o.statusQueue={},o.socket=a,o}return Object(a.a)(n,[{key:"moveByOthers",value:function(){var t=this;return new Promise((function(e){var n=t.model.getCurrentPlayer().faction.getId();if(Object(c.a)(t.statusQueue[n]))t.socket.on(u.m,(function(r){console.log(n),console.log("sync msg",r);var a=r.current,o=r.from,i={from:o,to:r.to,piece:t.model.getBoard().get(o)};a===n?e(i):Object(c.a)(t.statusQueue[a])?t.statusQueue[a]=[i]:t.statusQueue[a].push(i)}));else{var r=t.statusQueue[n].splice(0,1);e(r[0])}}))}}]),n}(n(77).a);n.d(e,"a",(function(){return s}))},149:function(t,e,n){"use strict";var r=n(115);n.o(r,"PredictorManager")&&n.d(e,"PredictorManager",(function(){return r.PredictorManager}));n(24);var a=n(142);n.d(e,"PredictorManager",(function(){return a.a}));n(65)},153:function(t,e,n){t.exports=n(242)},158:function(t,e,n){},163:function(t,e,n){},164:function(t,e,n){},17:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(8),a=n(14),o=function(t){var e=t.x,n=t.y,o=a.e.length-1;if(e<0||e>o||n<0||n>o)return!1;var i=Object(r.a)(a.e[n],2),c=i[0],u=i[1];return e>=c&&e<=u},i=function(t){return(t+3)%a.b}},203:function(t,e){},230:function(t,e){},233:function(t,e,n){},234:function(t,e,n){},235:function(t,e,n){},236:function(t,e,n){},237:function(t,e,n){},238:function(t,e,n){},239:function(t,e,n){},24:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o}));var r=function(t,e){var n=255;return e.forEach((function(e){n=Math.min(n,function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.abs(n)<Math.abs(r)?Math.abs(n)+Math.abs(t.y-n-e.y):Math.abs(r)+Math.abs(t.x-r-e.x)}(e,t))})),n},a=function(t,e,n){return r(e,t)-r(n,t)},o=function(t,e){var n=[];return e.getPieces().forEach((function(e){var r=e.getCoordinate();t.getAvailableJumpPosition(r).forEach((function(t){n.push({from:r,to:t,piece:e})}))})),n}},240:function(t,e,n){},241:function(t,e,n){},242:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(36),i=n.n(o),c=n(23),u=n(9),s=n(19),l=(n(158),function(){return a.a.createElement("div",{className:"home"},a.a.createElement("p",{className:"home-title"},"Chinese Checker"),a.a.createElement("section",null,a.a.createElement(c.b,{to:"/single/room",replace:!0},"\u5355\u4eba\u6e38\u620f"),a.a.createElement(c.b,{to:"/network/connect",replace:!0},"\u7f51\u7edc\u5bf9\u6218")))}),f=n(152),d=(n(163),n(7)),h=function(t){var e=t||{},n=e.index,o=e.aiLevel,i=e.playerName,c=e.slotType,u=e.onChangeSlot,s=e.status,l=Object(r.useMemo)((function(){return"faction-slot-".concat(n)}),[n]),h=Object(r.useMemo)((function(){switch(c){case"empty":return"\u7a7a";case"ai":return{simple:"\u7b80\u5355\u7535\u8111",normal:"\u4e2d\u7b49\u7535\u8111",hard:"\u56f0\u96be\u7535\u8111"}[o||"simple"];case"myself":return"\u6211";case"player":return i||"\u7f51\u7edc\u73a9\u5bb6"}}),[o,i,c]),m=Object(r.useMemo)((function(){return s===d.b.Preparing?"\u51c6\u5907":""}),[s]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:"faction-slot ".concat(l),"data-tip":!0,"data-for":l,"data-event":"click focus"},h,a.a.createElement("br",null),m),u&&a.a.createElement(f.a,{id:l,place:"bottom",type:"dark",effect:"solid",globalEventOff:"click",clickable:!0},a.a.createElement("ul",{className:"faction-slot-selector"},a.a.createElement("li",{onClick:function(){return u("empty")}},"\u7a7a"),a.a.createElement("li",{onClick:function(){return u("myself")}},"\u6211"),a.a.createElement("li",{onClick:function(){return u("ai","simple")}},"\u7b80\u5355\u7535\u8111"),a.a.createElement("li",{onClick:function(){return u("ai","normal")}},"\u4e2d\u7b49\u7535\u8111"),a.a.createElement("li",{onClick:function(){return u("ai","hard")}},"\u56f0\u96be\u7535\u8111"))))},m=(n(164),function(t){var e=t||{},n=e.onMiddleButtonClick,r=e.middleButtonText,o=e.slots,i=e.setSlot;return a.a.createElement("div",{className:"room"},a.a.createElement("div",{className:"room-middle",onClick:function(){return n(o)}},r),o.map((function(t,e){return a.a.createElement(h,Object.assign({key:e,index:e},t,{onChangeSlot:i?i.bind(null,e):void 0}))})))}),v=n(8),y=n(32),p={gameMode:"single",setGameMode:function(){},slots:[],setSlots:function(){},networkParam:null,setNetworkParam:function(){},networkRoomParam:null,setNetworkRoomParam:function(){}},b=Object(r.createContext)(p),k=function(t){var e=Object(r.useState)(null),n=Object(v.a)(e,2),o=n[0],i=n[1],c=Object(r.useState)(null),u=Object(v.a)(c,2),s=u[0],l=u[1],f=Object(r.useState)("single"),d=Object(v.a)(f,2),h=d[0],m=d[1],k=Object(r.useState)([]),g=Object(v.a)(k,2),O=g[0],C=g[1],j=Object(y.a)(Object(y.a)({},p),{},{gameMode:h,setGameMode:m,slots:O,setSlots:C,networkParam:o,setNetworkParam:i,networkRoomParam:s,setNetworkRoomParam:l});return a.a.createElement(b.Provider,{value:j},(t||{}).children)},g=function(){return Object(r.useContext)(b)},O=n(147),C=n.n(O),j=function(){var t=g().networkParam||{},e=t.server,n=t.clientId;return Object(r.useMemo)((function(){return function(t,r){if(!n||!e)return Promise.reject("params invalid");var a="//".concat(e).concat(t),o={clientId:n,data:r};return C.a.post(a,o).then((function(t){var e=t.data;if(e.code===d.k)return e.data;throw s.b.warn(e.message,{autoClose:1e3,hideProgressBar:!0,position:"top-center"}),new Error(e.message)}))}}),[e,n])},x=n(247),E=n(148),M=n.n(E),P=function(){var t=g();return{connect:function(e){return new Promise((function(n,r){var a=M()(e,{path:d.i}),o=setTimeout((function(){a.close(),r()}),5e3);a.on(d.l,(function(r){t.setNetworkParam({clientId:r.id,server:e,socket:a}),clearTimeout(o),n()})),a.on("disconnect",(function(){t.setNetworkParam(null),t.setNetworkRoomParam(null),s.b.info("\u8fde\u63a5\u5df2\u65ad\u5f00",{autoClose:1e3,hideProgressBar:!0,position:"top-center"}),a.close()})),a.connect()}))},disconnect:Object(r.useCallback)((function(){var e=t.networkParam,n=t.setNetworkParam;e&&(e.socket.disconnect(),n(null))}),[t])}},I=function(){var t=Object(u.g)(),e=g(),n=e.setSlots,o=e.setGameMode,i=function(){var t=Object(r.useState)(3),e=Object(v.a)(t,2),n=e[0],a=e[1],o=Object(r.useState)(function(t){return[0,1,2,3,4,5].map((function(e){return{slotType:e===t?"myself":"empty"}}))}(n)),i=Object(v.a)(o,2),c=i[0],u=i[1];return{slots:c,setSlot:function(t,e,r,o){if(t===n)return!1;var i=Array.from(c),s={slotType:e,playerName:o,aiLevel:r};return"myself"===e&&(i[n]={slotType:"empty"},a(t)),i[t]=s,u(i),!0}}}(),c=i.slots,s=i.setSlot,l=Object(r.useCallback)((function(e){o("single"),n(e),t.replace("/game")}),[t,o,n]);return a.a.createElement(m,{middleButtonText:"\u5f00\u59cb",onMiddleButtonClick:l,slots:c,setSlot:s})},w=n(2),S=n(3),F=n(6),G=n(5),T=n(66),B=function(t){Object(F.a)(n,t);var e=Object(G.a)(n);function n(t,r){var a;return Object(w.a)(this,n),(a=e.call(this,function(t,e){var n=[],r=[],a=0;return e.slots.forEach((function(t,e){var o=t.slotType;"empty"!==o&&("myself"===o?a=e:r.push({factionId:e,difficulty:t.aiLevel||"simple"}),n.push(e))})),{canvasElement:t,players:n,aiPlayers:r,myFactionId:a}}(t,r))).events=void 0,a.events={onChessMove:r.onChessMove,onClick:r.onClick,onGameEnd:r.onGameEnd,onGameStart:r.onGameStart,onGameWin:r.onGameWin},a}return Object(S.a)(n,[{key:"onClick",value:function(t){this.events.onClick(t)}},{key:"onGameStart",value:function(){this.events.onGameStart()}},{key:"onGameEnd",value:function(){this.events.onGameEnd()}},{key:"onGameWin",value:function(t){this.events.onGameWin(t)}},{key:"onChessMove",value:function(t){this.events.onChessMove(t)}}]),n}(T.SinglePlayerCheckerGameGui),A=function(t){Object(F.a)(n,t);var e=Object(G.a)(n);function n(t,r){var a;return Object(w.a)(this,n),(a=e.call(this,function(t,e){var n=[],r=0;return e.slots.forEach((function(t,e){var a=t.slotType;"empty"!==a&&("myself"===a&&(r=e),n.push(e))})),{aiPlayers:[],canvasElement:t,myFactionId:r,players:n}}(t,r),r.socket)).events=void 0,a.events={onChessMove:r.onChessMove,onClick:r.onClick,onGameEnd:r.onGameEnd,onGameStart:r.onGameStart,onGameWin:r.onGameWin},a}return Object(S.a)(n,[{key:"onClick",value:function(t){this.events.onClick(t)}},{key:"onGameStart",value:function(){this.events.onGameStart()}},{key:"onGameEnd",value:function(){this.events.onGameEnd()}},{key:"onGameWin",value:function(t){this.events.onGameWin(t)}},{key:"onChessMove",value:function(t){this.events.onChessMove(t)}}]),n}(T.MultiPlayersCheckerGameGui),R=(n(233),function(t){var e=t||{},n=e.mode,o=e.slots,i=Object(r.useRef)(null);return Object(r.useEffect)((function(){null!==i.current&&("single"===n?new B(i.current,t).start():new A(i.current,t).start())}),[i,n]),o.length?a.a.createElement("canvas",{ref:i,className:"chess",width:600,height:600}):a.a.createElement(u.a,{to:"/"})}),L=(n(234),function(t){var e=(t||{}).steps,n=Object(r.useRef)(null);return Object(r.useEffect)((function(){null!==n.current&&(n.current.scrollTop=n.current.scrollHeight)}),[e]),a.a.createElement("div",{className:"step-list"},a.a.createElement("div",{className:"step-list-title"},"\u884c\u68cb\u8bb0\u5f55"),a.a.createElement("ul",{className:"step-list-content",ref:n},e.map((function(t,e){var n=t.piece.getFactionId(),r=t.from,o=t.to;return a.a.createElement("li",{key:e},"Player ".concat(n," | (").concat(r.x,", ").concat(r.y,") -> (").concat(o.x,", ").concat(o.y,")"))}))))}),N=(n(235),function(){var t=Object(u.g)(),e=g(),n=e.gameMode,o=e.slots,i=e.networkParam,c=function(){var t=g(),e=t.gameMode,n=t.networkRoomParam,a=j(),o=Object(r.useState)("preparing"),i=Object(v.a)(o,2),c=i[0],u=i[1],s=Object(r.useState)("Ready"),l=Object(v.a)(s,2),f=l[0],h=l[1],m=Object(r.useState)([]),y=Object(v.a)(m,2),p=y[0],b=y[1];return{status:c,mention:f,actions:p,onChessMove:function(t){var r=t[t.length-1],o=r.piece.getFactionId(),i=r.from,c=r.to,u="Player ".concat(o,": (").concat(i.x,", ").concat(i.y,") -> (").concat(c.x,", ").concat(c.y,")");if("network"===e&&n&&n.myFaction===o){var s=r.from,l=r.to;a(d.f,{from:s,to:l})}h(u),b(t)},onClick:function(t){h("You have clicked on (".concat(t.x,", ").concat(t.y,")"))},onGameEnd:function(){u("end"),h("Game Over~")},onGameStart:function(){u("running"),h("Game Start~")},onGameWin:function(t){h("Player ".concat(t," has reached the goal!"))}}}(),l=c.status,f=c.actions,h=c.mention,m=c.onChessMove,y=c.onClick,p=c.onGameEnd,b=c.onGameStart,k=c.onGameWin;return Object(r.useEffect)((function(){var e="network"===n?"/network/rooms":"/single/room";"end"===l&&s.b.info("\u6e38\u620f\u7ed3\u675f,1s\u540e\u81ea\u52a8\u8fd4\u56de...",{autoClose:1e3,hideProgressBar:!0,position:"top-center",onClose:function(){return t.replace(e)}})}),[l,o,n,t]),a.a.createElement(a.a.Fragment,null,a.a.createElement(R,{mode:n,slots:o,onGameStart:b,onGameEnd:p,onGameWin:k,onChessMove:m,onClick:y,socket:i&&i.socket||void 0}),a.a.createElement("div",{className:"game-status-label"},h),a.a.createElement(L,{steps:f}))}),_=(n(236),function(){var t=g(),e=Object(r.useState)(""),n=Object(v.a)(e,2),o=n[0],i=n[1],c=Object(r.useState)("Connect"),l=Object(v.a)(c,2),f=l[0],d=l[1],h=P().connect,m=Object(r.useCallback)((function(){d("Connecting"),h(o).then((function(){s.b.info("\u8fde\u63a5\u6210\u529f",{autoClose:1e3,hideProgressBar:!0,position:"top-center"})})).catch((function(){s.b.warn("\u8fde\u63a5\u5931\u8d25",{autoClose:1e3,hideProgressBar:!0,position:"top-center"}),d("Connect")}))}),[o,h]);return t.networkParam?a.a.createElement(u.a,{to:"/network/rooms"}):a.a.createElement("div",{className:"net-connection"},a.a.createElement("label",{className:"net-connection-input"},"\u8fde\u63a5\u670d\u52a1\u5668 http://",a.a.createElement("input",{type:"text",value:o,onChange:function(t){i(t.target.value)}})),a.a.createElement("div",{className:"net-connection-button",onClick:m},f))}),W=(n(237),function(t){var e=t||{},n=e.onClickFreeSlot,o=e.roomInfo,i=Object(r.useCallback)((function(t){o.freeFactions.includes(t)&&n(o.id,t)}),[n,o.id,o.freeFactions]);return a.a.createElement("div",{className:"net-room-preview"},a.a.createElement("div",{className:"net-room-preview-name"},a.a.createElement("div",{className:"net-room-preview-name-title"},"\u623f\u95f4:"),a.a.createElement("div",{className:"net-room-preview-name-content"},o.name)),a.a.createElement("div",{className:"net-room-preview-factions"},[0,1,2,3,4,5].map((function(t,e){return a.a.createElement("div",{key:t,onClick:function(){return i(t)},className:o.freeFactions.includes(t)?"net-room-preview-factions-free":"net-room-preview-factions-filled"},e)}))))}),Z=(n(238),function(t){var e=Object(r.useState)(""),n=Object(v.a)(e,2),o=n[0],i=n[1],c=t||{},u=c.onCreateRoom,l=c.onDisconnect,f=Object(r.useCallback)((function(){o?u(o):s.b.warn("\u623f\u95f4\u540d\u4e0d\u80fd\u4e3a\u7a7a",{autoClose:1e3,hideProgressBar:!0,position:"top-center"})}),[o,u]);return a.a.createElement("div",{className:"netroom-create"},a.a.createElement("label",null,"\u623f\u95f4\u540d:",a.a.createElement("input",{type:"text",onChange:function(t){return i(t.target.value)},value:o})),a.a.createElement("a",{className:"netroom-create-btn",onClick:f},"\u65b0\u5efa\u623f\u95f4"),a.a.createElement("a",{className:"netroom-create-btn disconnect",onClick:l},"\u65ad\u5f00\u8fde\u63a5"))}),X=(n(239),function(){var t=g(),e=t.networkParam,n=t.networkRoomParam,o=t.setNetworkRoomParam,i=j(),c=function(){var t=Object(r.useState)([]),e=Object(v.a)(t,2),n=e[0],a=e[1],o=g().networkParam,i=j();return Object(r.useEffect)((function(){o&&i(d.e,{}).then((function(t){a(t.rooms);var e=o.socket;return e.on(d.o,(function(t){a(t.rooms)})),function(){e.removeEventListener(d.o)}}))}),[o,i]),n}(),s=P().disconnect;!function(t,e){var n=Object(u.g)();Object(r.useEffect)((function(){t?e&&n.replace("/network/room/".concat(e.roomId)):n.replace("/network/connect")}),[t,e,n])}(e,n);var l=Object(r.useCallback)((function(t){i(d.a,{factions:[0,1,2,3,4,5],myFaction:3,name:t}).then((function(t){o({iAmMaster:!0,myFaction:3,roomId:t.roomId})}))}),[i,o]),f=Object(r.useCallback)((function(t,e){i(d.c,{myFaction:e,roomId:t}).then((function(){o({iAmMaster:!1,myFaction:e,roomId:t})}))}),[i,o]);return e?n?a.a.createElement(u.a,{to:"/network/room/".concat(n.roomId)}):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"netroom-container"},c.map((function(t,e){return a.a.createElement(W,{key:e,roomInfo:t,onClickFreeSlot:f})}))),a.a.createElement(Z,{onCreateRoom:l,onDisconnect:s})):a.a.createElement(u.a,{to:"/network/connect"})}),H=(n(240),function(){var t=g(),e=t.networkParam,n=t.networkRoomParam,o=t.setNetworkRoomParam,i=t.setGameMode,c=function(){var t=Object(r.useState)(null),e=Object(v.a)(t,2),n=e[0],a=e[1],o=g(),i=o.networkParam,c=o.networkRoomParam,u=o.setNetworkRoomParam,s=j();return Object(r.useEffect)((function(){i&&c&&c.roomId&&s(d.h,{roomId:c.roomId}).then((function(t){a(t);var e=i.socket;return e.on(d.n,(function(t){a(t)})),function(){e.removeEventListener(d.n)}})).catch((function(){u(null)}))}),[c,s,u,i]),Object(r.useEffect)((function(){var t=c||{},e=t.myFaction,r=t.iAmMaster;n&&n.players&&!Object(x.a)(e)&&n.players[e]&&n.players[e].isMaster!==r&&u(Object(y.a)(Object(y.a)({},c),{},{iAmMaster:n.players[e].isMaster}))}),[n,c,u]),n}(),s=function(t){var e=g(),n=e.networkRoomParam,a=e.setSlots;return Object(r.useMemo)((function(){if(!n||!t)return[];for(var e=[],r=0;r<6;r++){var o=t.players[r];o?r===n.myFaction?e.push({slotType:"myself",status:o.status}):e.push({slotType:"player",status:o.status}):e.push({slotType:"empty"})}return a(e),e}),[t,n,a])}(c),l=function(t,e,n){var a=j(),o=Object(r.useCallback)((function(){return a(d.j,{})}),[a]),i=Object(r.useCallback)((function(){(t||{}).isPrepared||a(d.g,"/").then((function(){e(Object(y.a)(Object(y.a)({},t),{},{isPrepared:!0}))}))}),[t,a,e]);return Object(r.useCallback)((function(){t&&(t.iAmMaster?o():i(),n("network"))}),[t,i,o,n])}(n,o,i),f=function(t){return Object(r.useMemo)((function(){if(!t)return"";var e=t,n=e.iAmMaster,r=e.isPrepared;return n?"\u5f00\u59cb":r?"\u5df2\u51c6\u5907":"\u51c6\u5907"}),[t])}(n),h=j(),p=Object(r.useCallback)((function(){h(d.d,{}).then((function(){o(null)}))}),[o,h]);return e?n?c&&c.isProcessing?a.a.createElement(u.a,{to:"/game"}):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"netroom-leave",onClick:p},"\u79bb\u5f00\u623f\u95f4"),a.a.createElement(m,{middleButtonText:f,onMiddleButtonClick:l,slots:s})):a.a.createElement(u.a,{to:"/network/rooms"}):a.a.createElement(u.a,{to:"/network/connect"})}),V=(n(241),function(){return a.a.createElement("div",{className:"layout"},a.a.createElement(k,null,a.a.createElement(c.a,null,a.a.createElement(u.d,null,a.a.createElement(u.b,{path:"/single/room"},a.a.createElement(I,null)),a.a.createElement(u.b,{path:"/network/connect"},a.a.createElement(_,null)),a.a.createElement(u.b,{path:"/network/rooms"},a.a.createElement(X,null)),a.a.createElement(u.b,{path:"/network/room/:id"},a.a.createElement(H,null)),a.a.createElement(u.b,{path:"/game"},a.a.createElement(N,null)),a.a.createElement(u.b,{path:"/"},a.a.createElement(l,null))))),a.a.createElement(s.a,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},26:function(t,e,n){"use strict";var r=n(35);n.o(r,"GameModel")&&n.d(e,"GameModel",(function(){return r.GameModel})),n.o(r,"MATRIX_SIZE")&&n.d(e,"MATRIX_SIZE",(function(){return r.MATRIX_SIZE})),n.o(r,"mirrorFactionId")&&n.d(e,"mirrorFactionId",(function(){return r.mirrorFactionId}));var a=n(62);n.o(a,"GameModel")&&n.d(e,"GameModel",(function(){return a.GameModel})),n.o(a,"MATRIX_SIZE")&&n.d(e,"MATRIX_SIZE",(function(){return a.MATRIX_SIZE})),n.o(a,"mirrorFactionId")&&n.d(e,"mirrorFactionId",(function(){return a.mirrorFactionId}));var o=n(122);n.o(o,"GameModel")&&n.d(e,"GameModel",(function(){return o.GameModel})),n.o(o,"MATRIX_SIZE")&&n.d(e,"MATRIX_SIZE",(function(){return o.MATRIX_SIZE})),n.o(o,"mirrorFactionId")&&n.d(e,"mirrorFactionId",(function(){return o.mirrorFactionId}));var i=n(17);n.d(e,"mirrorFactionId",(function(){return i.b}));var c=n(14);n.d(e,"MATRIX_SIZE",(function(){return c.c}))},28:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return s})),n.d(e,"a",(function(){return l}));var r=n(10),a=18,o=15,i=12,c=9,u={unavailable:-1,neutral:r.d,0:r.m,1:r.n,2:r.o},s={normal:-1,focus:r.b,mention:r.c},l={0:r.e,1:r.f,2:r.g,3:r.h,4:r.i,5:r.j}},35:function(t,e,n){"use strict";var r=n(117);n.o(r,"ChessBoard")&&n.d(e,"ChessBoard",(function(){return r.ChessBoard})),n.o(r,"GameModel")&&n.d(e,"GameModel",(function(){return r.GameModel})),n.o(r,"MATRIX_SIZE")&&n.d(e,"MATRIX_SIZE",(function(){return r.MATRIX_SIZE})),n.o(r,"Piece")&&n.d(e,"Piece",(function(){return r.Piece})),n.o(r,"mirrorFactionId")&&n.d(e,"mirrorFactionId",(function(){return r.mirrorFactionId}));var a=n(118);n.d(e,"ChessBoard",(function(){return a.a}));var o=n(119);n.d(e,"Piece",(function(){return o.a}))},46:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(2),a=n(3),o=n(6),i=n(5),c=n(74),u=n(243),s=function(t){Object(o.a)(n,t);var e=Object(i.a)(n);function n(t,a){var o;return Object(r.a)(this,n),(o=e.call(this)).updated=!0,o.props=t,o.canvas=a,o}return Object(a.a)(n,[{key:"getProps",value:function(){return this.props}},{key:"getCanvas",value:function(){return this.canvas}},{key:"updateProps",value:function(t){return!!this.checkUpdate(this.props,t)&&(this.props=t,this.updated=!0,!0)}},{key:"render",value:function(){return!this.updated||!!this.renderView()&&(this.updated=!1,!0)}},{key:"checkUpdate",value:function(t,e){return!Object(u.a)(t,e)}}]),n}(c.EventEmitter)},49:function(t,e,n){"use strict";var r=n(125);n.o(r,"COLOR_CLEAR")&&n.d(e,"COLOR_CLEAR",(function(){return r.COLOR_CLEAR})),n.o(r,"COLOR_PIECE_OBSTACLE")&&n.d(e,"COLOR_PIECE_OBSTACLE",(function(){return r.COLOR_PIECE_OBSTACLE})),n.o(r,"CheckerView")&&n.d(e,"CheckerView",(function(){return r.CheckerView})),n.o(r,"HTMLCanvas2d")&&n.d(e,"HTMLCanvas2d",(function(){return r.HTMLCanvas2d}));var a=n(143);n.d(e,"HTMLCanvas2d",(function(){return a.a}));var o=n(10);n.d(e,"COLOR_CLEAR",(function(){return o.a})),n.d(e,"COLOR_PIECE_OBSTACLE",(function(){return o.k}))},62:function(t,e,n){"use strict";var r=n(120);n.o(r,"Faction")&&n.d(e,"Faction",(function(){return r.Faction})),n.o(r,"GameModel")&&n.d(e,"GameModel",(function(){return r.GameModel})),n.o(r,"MATRIX_SIZE")&&n.d(e,"MATRIX_SIZE",(function(){return r.MATRIX_SIZE})),n.o(r,"mirrorFactionId")&&n.d(e,"mirrorFactionId",(function(){return r.mirrorFactionId}));var a=n(121);n.d(e,"Faction",(function(){return a.a}))},63:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(2),a=n(3),o=n(31),i=n(15),c=n(6),u=n(5),s=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(t,a,o){var i;return Object(r.a)(this,n),(i=e.call(this,t,a)).elements=[],i.elements=o,i}return Object(a.a)(n,[{key:"getChildren",value:function(){return this.elements}},{key:"render",value:function(){var t=Object(o.a)(Object(i.a)(n.prototype),"render",this).call(this);return this.elements.forEach((function(e){t&&(t=t&&e.render())})),t}}]),n}(n(46).a)},64:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(2),a=n(3),o=n(6),i=n(5),c=n(46),u=n(49),s=n(28),l=function(t){Object(o.a)(n,t);var e=Object(i.a)(n);function n(t,a){return Object(r.a)(this,n),e.call(this,t,a)}return Object(a.a)(n,[{key:"renderView",value:function(){return"unavailable"===this.getProps().slotCategory||this.clearArea()&&this.renderSlot()&&this.renderPiece()&&this.renderStatus()}},{key:"checkUpdate",value:function(t,e){return t.status!==e.status||(null===t.piece&&null!==e.piece||null!==t.piece&&null===e.piece||null!==t.piece&&null!==e.piece&&t.piece.getFactionId()!==e.piece.getFactionId())}},{key:"clearArea",value:function(){var t=this.getProps(),e=this.getCanvas();return!!e.setColor(u.COLOR_CLEAR)&&e.setFillMode("fill").circle(t.coordinate,s.c)}},{key:"renderSlot",value:function(){var t=this.getProps(),e=this.getCanvas();return!!e.setColor(s.f[t.slotCategory])&&e.setFillMode("stroke").circle(t.coordinate,s.e)}},{key:"renderPiece",value:function(){var t=this.getCanvas(),e=this.getProps(),n=e.piece;if(null===n)return!0;var r=n.getFactionId();return!(null===r&&!t.setColor(u.COLOR_PIECE_OBSTACLE))&&(!!t.setColor(s.a[r])&&t.setFillMode("fill").circle(e.coordinate,s.d))}},{key:"renderStatus",value:function(){var t=this.getCanvas(),e=this.getProps();return"normal"===e.status||"mention"===e.status||!!t.setColor(s.g[e.status])&&t.setFillMode("stroke").circle(e.coordinate,s.b)}}]),n}(c.a)},65:function(t,e,n){"use strict";var r=n(2),a=n(3),o=n(24),i=function(){function t(){Object(r.a)(this,t),this.emptyGoals=[]}return Object(a.a)(t,[{key:"updateBoardAndFaction",value:function(t,e){this.board=t,this.faction=e,this.updateEmptyGoals()}},{key:"getScore",value:function(t){return this.isInnerPiece(t.from)?this.getInnerPieceMaxStep(t):this.getOuterPieceMaxStep(t)}},{key:"getInnerPieceMaxStep",value:function(t){return Object(o.b)([this.faction.getGoalCoordinates()[0]],t.from,t.to)}},{key:"getOuterPieceMaxStep",value:function(t){var e=t.from,n=t.to;return Object(o.b)(this.emptyGoals,e,n)}},{key:"isInnerPiece",value:function(t){var e;return(null===(e=this.faction)||void 0===e?void 0:e.isGoalCoordinate(t))||!1}},{key:"updateEmptyGoals",value:function(){var t,e=this,n=(null===(t=this.faction)||void 0===t?void 0:t.getGoalCoordinates())||[];this.emptyGoals=n.filter((function(t){var n,r,a=null===(n=e.board)||void 0===n?void 0:n.get(t);return null===a||a.getFactionId()!==(null===(r=e.faction)||void 0===r?void 0:r.getId())}))}}]),t}();n.d(e,"a",(function(){return i}))},66:function(t,e,n){"use strict";var r=n(144);n.d(e,"SinglePlayerCheckerGameGui",(function(){return r.a}));var a=n(145);n.d(e,"MultiPlayersCheckerGameGui",(function(){return a.a}));n(141)},7:function(t,e,n){"use strict";var r;!function(t){t[t.Free=0]="Free",t[t.Preparing=1]="Preparing",t[t.Gaming=2]="Gaming"}(r||(r={}));n.d(e,"k",(function(){return 200})),n.d(e,"i",(function(){return"/chess"})),n.d(e,"a",(function(){return"/room/create"})),n.d(e,"e",(function(){return"/room/list"})),n.d(e,"c",(function(){return"/room/join"})),n.d(e,"d",(function(){return"/room/leave"})),n.d(e,"h",(function(){return"/room/detail"})),n.d(e,"g",(function(){return"/game/prepare"})),n.d(e,"j",(function(){return"/game/start"})),n.d(e,"f",(function(){return"/game/move"})),n.d(e,"l",(function(){return"client"})),n.d(e,"o",(function(){return"rooms"})),n.d(e,"n",(function(){return"detail"})),n.d(e,"b",(function(){return r})),n.d(e,"m",(function(){return"game"}))},73:function(t,e,n){"use strict";var r=n(49);n.o(r,"CheckerView")&&n.d(e,"CheckerView",(function(){return r.CheckerView})),n.o(r,"HTMLCanvas2d")&&n.d(e,"HTMLCanvas2d",(function(){return r.HTMLCanvas2d}));var a=n(126);n.o(a,"CheckerView")&&n.d(e,"CheckerView",(function(){return a.CheckerView})),n.o(a,"HTMLCanvas2d")&&n.d(e,"HTMLCanvas2d",(function(){return a.HTMLCanvas2d}))},77:function(t,e,n){"use strict";var r=n(2),a=n(3),o=n(247),i=n(243),c=n(248),u=n(26),s=n(73),l=n(6),f=n(5),d=function(t){Object(l.a)(n,t);var e=Object(f.a)(n);function n(t,a){return Object(r.a)(this,n),e.call(this,t,a)}return Object(a.a)(n,[{key:"convert",value:function(t){return t}},{key:"reconvert",value:function(t){return t}}]),n}(s.CheckerView),h=function(){function t(e){var n=this;Object(r.a)(this,t),this.handler=function(t){if("running"===n.model.getStatus()&&n.isMyTurn())if(n.onClick(t),Object(o.a)(n.focus))n.setFocus(t);else if(!Object(i.a)(n.focus,t)){var e=n.mentions;if(!Object(c.a)(e)&&void 0!==e.find((function(e){return Object(i.a)(e,t)})))return n.moveByMyself(t).then((function(t){return n.move(t)})).then((function(){return n.go()}));n.removeFocusAndMentions()&&n.setFocus(t)}};var a=e.canvasElement,l=e.aiPlayers,f=e.players,h=e.myFactionId;this.canvas=new s.HTMLCanvas2d(a),this.aiPlayers=l,this.myFactionId=h,this.model=new u.GameModel(f),this.view=new d(this.model.getBoard(),this.canvas),this.view.onClick(this.handler)}return Object(a.a)(t,[{key:"start",value:function(){return!!this.model.start()&&(!!this.view.render()&&(this.onGameStart(),this.go(),!0))}},{key:"go",value:function(){var t=this;this.isCurrentPlayerWins()&&this.onGameWin(this.model.getCurrentPlayer().faction.getId()),"end"!==this.model.getStatus()?this.isMyTurn()||this.moveByOthers().then((function(e){return t.move(e)})).then((function(){return t.go()})):this.onGameEnd()}},{key:"move",value:function(t){var e=t.from,n=t.to;return!!(this.model.getBoard().move(e,n)&&this.view.updateProps(this.model.getBoard())&&this.view.render())&&(this.onChessMove(this.model.getBoard().getActionList()),this.model.updateStatus(),!0)}},{key:"moveByMyself",value:function(t){var e=this.focus;return this.focus=void 0,this.mentions=void 0,Promise.resolve({from:e,to:t,piece:this.model.getBoard().get(e)})}},{key:"isMyTurn",value:function(){return this.model.getCurrentPlayer().faction.getId()===this.myFactionId}},{key:"isCurrentPlayerWins",value:function(){return this.model.getCurrentPlayer().faction.checkWin()}},{key:"setFocus",value:function(t){var e=this.view,n=this.model;if(!e.setFocusStatus(t,"focus"))return!1;this.focus=t;var r=n.getBoard().get(t);return null!==r&&r.getFactionId()===n.getCurrentPlayer().faction.getId()&&(this.mentions=n.getBoard().getAvailableJumpPosition(t),this.mentions.forEach((function(t){e.setFocusStatus(t,"mention")}))),!0}},{key:"removeFocusAndMentions",value:function(){var t=this.view,e=t.setFocusStatus(this.focus,"normal");return this.focus=void 0,Object(c.a)(this.mentions)||(this.mentions.forEach((function(n){e=e&&t.setFocusStatus(n,"normal")})),this.mentions=void 0),e}}]),t}();n.d(e,"a",(function(){return h}))}},[[153,1,2]]]);
//# sourceMappingURL=main.d9c50946.chunk.js.map